<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dikgames - Your Ultimate Game Download Platform</title>
    <meta name="description"
        content="Discover the latest and greatest games on Dikgames, your one-stop platform for gaming downloads.">
    <meta name="keywords"
        content="download games, games, gaming platform, game download, video games, Dikgames, latest games">
    <meta name="robots" content="index, follow">
    <meta name="author" content="Dikgames Team">
    <meta property="og:title" content="Dikgames - Your Ultimate Gaming Platform">
    <meta property="og:description"
        content="Download a wide variety of games, from action to love, on Dikgames. Stay updated with the latest releases and updates.">
    <meta property="og:image" content="https://dikgames.pages.dev/images/banner.webp">
    <meta property="og:url" content="https://dikgames.pages.dev/">
    <meta name="twitter:card" content="summary_large_image">
    <link rel="canonical" href="https://dikgames.pages.dev/">
    <!-- Preload critical resources -->
    <link rel="preload" href="public/data/games.pb" as="fetch" type="application/vnd.google.protobuf"
        fetchpriority="high" crossorigin="anonymous">
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/protobufjs@7.2.5/dist/protobuf.min.js" as="script"
        crossorigin="anonymous">
    <link rel="preload" href="public/fonts/AnonymousPro-Regular.woff2" as="font" type="font/woff2"
        crossorigin="anonymous">
    <link rel="preload" href="public/fonts/AnonymousPro-Bold.woff2" as="font" type="font/woff2" crossorigin="anonymous">


    <style>
        @font-face {
            font-family: 'Anonymous Pro';
            src: url('public/fonts/AnonymousPro-Regular.woff2') format('woff2'),
                url('public/fonts/AnonymousPro-Regular.woff') format('woff');
            font-weight: 400;
            font-style: normal;
            font-display: swap;
        }

        @font-face {
            font-family: 'Anonymous Pro';
            src: url('public/fonts/AnonymousPro-Bold.woff2') format('woff2'),
                url('public/fonts/AnonymousPro-Bold.woff') format('woff');
            font-weight: 700;
            font-style: normal;
            font-display: swap;
        }

        :root {
            --primary-color: rgba(64, 196, 255, 0.6);
            --secondary-color: rgba(2, 136, 209, 0.8);
            --solid-primary: #40c4ff;
            --bg-dark: #000000;
            --card-bg: #1a1a1a;
            --border-color: rgba(255, 255, 255, 0.4);
            --text-white: #ffffff;
            --text-muted: #cccccc;
            --cloud-glow: rgba(255, 255, 255, 0.2);
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Anonymous Pro', monospace, sans-serif;
        }

        body {
            background-color: var(--bg-dark);
            color: var(--text-white);
            line-height: 1.6;
            font-size: clamp(16px, 2vw, 18px);
        }

        a {
            text-decoration: none;
            color: var(--text-white);
            transition: var(--transition);
        }

        a:focus,
        button:focus,
        input:focus {
            outline: 3px solid var(--solid-primary);
            outline-offset: 2px;
        }

        .top-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 2rem;
            background-color: var(--bg-dark);
            border-bottom: 1px solid var(--border-color);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .logo {
            font-size: clamp(1.5rem, 3vw, 1.75rem);
            font-weight: 700;
            color: var(--solid-primary);
        }

        .search-bar {
            display: flex;
            align-items: center;
            max-width: 400px;
            width: 100%;
        }

        .search-bar input {
            padding: 0.5rem 1rem;
            border: 1px solid var(--border-color);
            border-radius: 20px 0 0 20px;
            background-color: var(--card-bg);
            color: var(--text-white);
            font-size: 0.9rem;
            outline: none;
            width: 100%;
            transition: var(--transition);
        }

        .search-bar input:focus {
            border-color: var(--solid-primary);
        }

        .search-bar input::placeholder {
            color: var(--text-muted);
        }

        .search-bar button {
            padding: 0.5rem 1rem;
            background-color: var(--primary-color);
            border: 1px solid var(--border-color);
            border-radius: 0 20px 20px 0;
            color: var(--text-white);
            cursor: pointer;
            transition: var(--transition);
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            box-shadow: 0 0 10px var(--cloud-glow);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .search-bar button:hover:not(:disabled) {
            background-color: var(--secondary-color);
            border-color: var(--solid-primary);
            box-shadow: 0 0 15px var(--cloud-glow);
        }

        .search-bar svg {
            width: 16px;
            height: 16px;
            fill: var(--text-white);
        }

        .banner {
            margin: 2rem clamp(2rem, 5vw, 2.5rem);
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
            border: 1px solid var(--border-color);
            padding: 20px 0 20px 0;
        }

        .banner img {
            width: 100%;
            height: auto;
            display: block;
            object-fit: cover;
            aspect-ratio: 20 / 6;
            object-position: center top;
        }

        .recommend-container {
            margin: 2rem clamp(2.5rem, 6vw, 3rem);
            max-width: 1200px;
            background: var(--card-bg);
            border-radius: 12px;
            padding: 2rem;
            border: 1px solid var(--border-color);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
        }

        .recommend-title {
            font-size: clamp(1.5rem, 3vw, 2rem);
            font-weight: 700;
            color: var(--text-white);
            border-bottom: 2px solid var(--solid-primary);
            margin-bottom: 1.5rem;
            padding-bottom: 0.5rem;
            text-align: left;
        }

        .recommend-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(clamp(300px, 40vw, 400px), 1fr));
            gap: 20rem;
        }

        .recommend-card {
            display: flex;
            flex-direction: column;
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            overflow: hidden;
            transition: var(--transition);
        }

        .recommend-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.7);
            border-color: var(--secondary-color);
        }

        .recommend-image-box {
            width: 100%;
            aspect-ratio: 4 / 1;
            overflow: hidden;
        }

        .recommend-image-box img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            display: block;
        }

        .recommend-details {
            padding: 1rem;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .recommend-game-name {
            font-size: clamp(1.2rem, 2vw, 1.4rem);
            font-weight: 700;
            color: var(--text-white);
        }

        .recommend-description {
            color: var(--text-muted);
            font-size: 0.9rem;
            display: -webkit-box;
            -webkit-line-clamp: 4;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .recommend-download-btn {
            padding: 0.5rem 1rem;
            background-color: var(--primary-color);
            border: 1px solid var(--border-color);
            border-radius: 20px;
            color: var(--text-white);
            cursor: pointer;
            font-size: 0.9rem;
            transition: var(--transition);
            text-align: center;
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            box-shadow: 0 0 10px var(--cloud-glow);
            align-self: flex-start;
        }

        .recommend-download-btn:hover {
            background-color: var(--secondary-color);
            border-color: var(--solid-primary);
            box-shadow: 0 0 15px var(--cloud-glow);
        }

        .tags-link-container {
            margin: 1rem clamp(2.5rem, 6vw, 3rem);
            text-align: center;
        }

        .tags-link {
            display: inline-block;
            background-color: var(--primary-color);
            color: var(--text-white);
            padding: 0.75rem 1.5rem;
            border: 1px solid var(--border-color);
            border-radius: 20px;
            font-size: 0.9rem;
            transition: var(--transition);
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            box-shadow: 0 0 10px var(--cloud-glow);
        }

        .tags-link:hover {
            background-color: var(--secondary-color);
            border-color: var(--solid-primary);
            box-shadow: 0 0 15px var(--cloud-glow);
        }

        main {
            background-color: var(--bg-dark);
            max-width: 1200px;
            margin: 0 auto;
        }

        .latest-games-container {
            margin: 0 clamp(6rem, 6vw, 6rem);
        }

        .links-container {
            margin: 2rem clamp(2.5rem, 6vw, 3rem);
        }

        .section-title {
            padding: 2rem 0 1rem;
            font-size: clamp(1.5rem, 3vw, 2rem);
            font-weight: 700;
            color: var(--text-white);
            border-bottom: 2px solid var(--solid-primary);
            margin-bottom: 1.5rem;
        }

        .games-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(clamp(200px, 25vw, 250px), 1fr));
            gap: 1.5rem;
            padding-bottom: 2rem;
        }

        .game-row {
            display: contents;
        }

        .game-card {
            background-color: var(--card-bg);
            border-radius: 12px;
            overflow: hidden;
            border: 1px solid var(--border-color);
            transition: var(--transition);
        }

        .game-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.7);
            border-color: var(--secondary-color);
        }

        .game-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
            display: block;
            loading: lazy;
        }

        .game-info {
            padding: 1rem;
        }

        .game-title {
            font-size: clamp(1rem, 2vw, 1.1rem);
            font-weight: 700;
            margin-bottom: 0.5rem;
            color: var(--text-white);
        }

        .game-meta {
            display: flex;
            justify-content: space-between;
            color: var(--text-muted);
            font-size: 0.8rem;
            margin-bottom: 0.75rem;
        }

        .game-description {
            color: var(--text-muted);
            font-size: 0.85rem;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 0.75rem;
            padding: 1.5rem;
        }

        .pagination button {
            background-color: var(--primary-color);
            border: 1px solid var(--border-color);
            color: var(--text-white);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: var(--transition);
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            box-shadow: 0 0 10px var(--cloud-glow);
        }

        .pagination button:hover:not(:disabled) {
            background-color: var(--secondary-color);
            border-color: var(--solid-primary);
            box-shadow: 0 0 15px var(--cloud-glow);
        }

        .pagination button:disabled {
            background-color: rgba(204, 204, 204, 0.3);
            border-color: var(--text-muted);
            cursor: not-allowed;
            opacity: 0.6;
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
        }

        .pagination span {
            color: var(--text-white);
            font-size: 0.9rem;
        }

        .loading {
            text-align: center;
            color: var(--text-muted);
            font-size: 1rem;
            grid-column: 1 / -1;
            padding: 2rem;
        }

        .links-grid {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            justify-content: center;
            padding-bottom: 2rem;
        }

        .link-button {
            background-color: var(--primary-color);
            color: var(--text-white);
            padding: 0.75rem 1.5rem;
            border: 1px solid var(--border-color);
            border-radius: 20px;
            font-size: 0.9rem;
            transition: var(--transition);
            text-align: center;
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            box-shadow: 0 0 10px var(--cloud-glow);
        }

        .link-button:hover {
            background-color: var(--secondary-color);
            border-color: var(--solid-primary);
            box-shadow: 0 0 15px var(--cloud-glow);
        }

        footer {
            background-color: var(--bg-dark);
            padding: 2rem clamp(2rem, 5vw, 2.5rem);
            text-align: center;
            border-top: 1px solid var(--border-color);
            margin-top: 2rem;
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
        }

        .footer-content p {
            color: var(--text-white);
            font-size: 0.9rem;
            margin-bottom: 1rem;
        }

        .social-links {
            display: flex;
            justify-content: center;
            gap: 1.5rem;
        }

        .social-links a {
            color: var(--text-white);
            font-size: 1.2rem;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
        }

        .social-links a:hover {
            color: var(--solid-primary);
        }

        .social-links svg {
            width: 20px;
            height: 20px;
            fill: currentColor;
        }

        .skeleton {
            background: var(--card-bg);
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0% {
                opacity: 0.6;
            }

            50% {
                opacity: 1;
            }

            100% {
                opacity: 0.6;
            }
        }

        @media (max-width: 768px) {
            .recommend-grid {
                grid-template-columns: 1fr;
            }

            .games-grid {
                grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            }

            .game-image {
                height: 180px;
            }

            .banner {
                margin: 1rem clamp(1.5rem, 4vw, 2rem);
            }

            .tags-link-container,
            .latest-games-container,
            .links-container,
            .recommend-container {
                margin: 2rem clamp(2rem, 5vw, 2.5rem);
            }
        }

        @media (max-width: 480px) {
            .recommend-grid {
                grid-template-columns: 1fr;
            }

            .games-grid {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 1rem;
            }

            .game-image {
                height: 150px;
            }

            .banner {
                margin: 0.5rem clamp(1rem, 3vw, 1.5rem);
            }

            .tags-link-container,
            .latest-games-container,
            .links-container,
            .recommend-container {
                margin: 2rem clamp(1.5rem, 4vw, 2rem);
            }

            .top-bar {
                flex-direction: column;
                gap: 1rem;
            }

            .search-bar {
                max-width: 100%;
            }

            .link-button {
                width: 100%;
                padding: 0.75rem;
            }
        }
    </style>
</head>

<body>
    <header class="top-bar" role="banner">
        <a href="index.html" class="logo" aria-label="Dikgames Home">Dikgames</a>
        <div class="search-bar" role="search">
            <input type="text" id="search-input" placeholder="Search games..." aria-label="Search for games">
            <button id="search-button" aria-label="Search">
                <svg viewBox="0 0 512 512" aria-hidden="true">
                    <path
                        d="M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352c79.5 0 144-64.5 144-144s-64.5-144-144-144S64 128.5 64 208s64.5 144 144 144z" />
                </svg>
            </button>
        </div>
    </header>
    <main>
        <section class="banner">
            <img src="images/banner.webp" alt="Exciting gaming scene showcasing new releases" loading="eager"
                srcset="images/banner.webp 600w, images/banner.webp 1200w" sizes="(max-width: 600px) 600px, 1200px"
                fetchpriority="high">
        </section>


        <section class="recommend-container" aria-labelledby="recommend-title">
            <h2 class="recommend-title" id="recommend-title">Recommended</h2>
            <div class="recommend-grid">
                <article class="recommend-card">
                    <div class="recommend-image-box">
                        <img src="images/game-cover.webp" alt="Love Life Game Cover" loading="lazy">
                    </div>
                    <div class="recommend-details">
                        <h3 class="recommend-game-name">Love Life</h3>
                        <p class="recommend-description">
                            Love Life ~ Choose Your Destiny is an adult game about choices, dating, and adventure.
                            After dying in an accident, the protagonist is saved by a mysterious voice and sent back to
                            the
                            past with a second chance. He regrets the choices he made before and misses his mother,
                            wishing
                            he could apologize and make things right. Now he works to clear the family debt while
                            entering a
                            dungeon where he can fight monsters, grow stronger, and uncover the truth behind his savior.
                            Along the way, he meets friends, rivals, and lovers—each choice shaping whether he remains
                            mortal, rises to godhood, or transcends the illusions crafted by the Supreme One.
                        </p>
                        <button class="recommend-download-btn" onclick="location.href='https://lovelifegame.pages.dev'">
                            Get Game
                        </button>

                    </div>
                </article>
            </div>
        </section>
        <section class="tags-link-container">
            <a href="tags.html" class="tags-link" aria-label="View all game tags">All Tags</a>
        </section>

        <section class="latest-games-container" aria-labelledby="latest-games">
            <h2 class="section-title" id="latest-games">Latest Updated Games</h2>
            <div class="games-grid" id="games-grid" role="grid" aria-labelledby="latest-games">
                <p class="loading skeleton" role="status">Loading games...</p>
            </div>
            <nav class="pagination" aria-label="Pagination" id="pagination"></nav>
        </section>
        <section class="links-container" aria-labelledby="links-section">
            <h2 class="section-title" id="links-section">Explore More</h2>
            <div class="links-grid">
                <a href="https://lovelifegame.pages.dev/" class="link-button" aria-label="LoveLifeGame">LoveLife
                    Game</a>
                <!-- <a href="/contact" class="link-button" aria-label="Contact us">Contact Us</a> -->
            </div>
        </section>
    </main>
    <footer>
        <div class="footer-content">
            <p>Dikgames &copy; 2025. Your ultimate platform for game downloads and game updates.</p>
            <div class="social-links">
                <a href="https://www.instagram.com/eternal_meta/" aria-label="Follow Dikgames on Instagram">
                    <svg viewBox="0 0 448 512" aria-hidden="true">
                        <path
                            d="M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.8 9.9 67.6 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z" />
                    </svg>
                </a>
            </div>
        </div>
    </footer>
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebSite",
        "name": "Dikgames",
        "url": "https://dikgames.pages.dev/",
        "potentialAction": {
            "@type": "SearchAction",
            "target": "https://dikgames.pages.dev/search.html?q={search_term_string}",
            "query-input": "required name=search_term_string"
        }
    }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/protobufjs@7.2.5/dist/protobuf.min.js" defer></script>
    <script>
        // Preload image function to ensure valid images before rendering
        function preloadImage(url, fallback) {
            return new Promise((resolve) => {
                const img = new Image();
                img.onload = () => resolve({ src: url, srcset: `${url}?w=250&q=80 250w, ${url}?w=500&q=80 500w` });
                img.onerror = () => resolve({ src: fallback, srcset: `${fallback}?w=250&q=80 250w, ${fallback}?w=500&q=80 500w` });
                img.src = url;
            });
        }

        // Get URL parameters
        function getUrlParams() {
            const params = new URLSearchParams(window.location.search);
            return {
                page: parseInt(params.get('page')) || 1
            };
        }

        // Debounce function to limit rapid event triggers
        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }

        const gamesPerPage = 6;
        let currentPage = getUrlParams().page;
        let allGames = [];

        async function fetchGames() {
            try {
                // Load the updated .proto file content with thumbnail field
                const protoContent = `
                    syntax = "proto3";
                    package Dikgames;
                    message Game {
                        string title = 1;
                        string developer = 2;
                        string version = 3;
                        string status = 4;
                        repeated string tags = 5;
                        string description = 6;
                        string download = 7;
                        string language = 8;
                        repeated string images = 9;
                        string thumbnail = 10;
                    }
                    message GameList {
                        repeated Game games = 1;
                    }
                `;

                // Load the protobuf schema
                const root = await protobuf.parse(protoContent, { keepCase: true }).root;
                const GameListMessage = root.lookupType("Dikgames.GameList");

                // Fetch the protobuf binary data
                const response = await fetch('public/data/games.pb', { cache: 'default' });
                if (!response.ok) {
                    throw new Error(`Failed to fetch games.pb: ${response.statusText}`);
                }
                const protoBinaryData = new Uint8Array(await response.arrayBuffer());

                // Decode the binary data
                const message = GameListMessage.decode(protoBinaryData);
                allGames = message.games;

                if (allGames.length === 0) {
                    document.getElementById("games-grid").innerHTML = `
                        <p style="color: var(--text-muted); grid-column: 1/-1; text-align: center;" class="skeleton" role="status">No games available.</p>`;
                    return;
                }

                await renderGames(allGames, currentPage);
            } catch (error) {
                console.error("Error loading games:", error);
                document.getElementById("games-grid").innerHTML = `
                    <p style="color: #ff6b6b; grid-column: 1/-1; text-align: center;" class="skeleton" role="status">Failed to load games: ${error.message}</p>`;
            }
        }

        async function renderGames(gameList, page = 1) {
            const gamesGrid = document.getElementById("games-grid");
            gamesGrid.innerHTML = '<p class="loading skeleton" role="status">Loading games...</p>';
            const start = (page - 1) * gamesPerPage;
            const end = start + gamesPerPage;
            const paginatedGames = gameList.slice(start, end);

            if (paginatedGames.length === 0) {
                gamesGrid.innerHTML = `<p style="color: var(--text-muted); grid-column: 1/-1; text-align: center;" class="skeleton" role="status">No games found.</p>`;
                renderPagination(gameList);
                return;
            }

            // Preload all thumbnail images before rendering
            const imagePromises = paginatedGames.map(game => {
                const imageSrc = game.thumbnail || (game.images && game.images[0]) || "https://via.placeholder.com/250x200?text=Game+Cover";
                return preloadImage(imageSrc, "https://via.placeholder.com/250x200?text=Game+Cover");
            });
            const preloadedImages = await Promise.all(imagePromises);

            // Batch DOM updates to avoid reflows
            const fragment = document.createDocumentFragment();
            paginatedGames.forEach((game, index) => {
                const gameRow = document.createElement("div");
                gameRow.className = "game-row";
                gameRow.setAttribute("role", "row");
                const gameCard = document.createElement("div");
                gameCard.className = "game-card";
                gameCard.setAttribute("role", "gridcell");
                const gameIndex = allGames.findIndex(g => g.title === game.title && g.developer === game.developer);
                if (gameIndex === -1) {
                    console.error(`Game index not found for ${game.title}`);
                    return;
                }
                const { src, srcset } = preloadedImages[index];
                gameCard.innerHTML = `
                    <a href="detail.html?id=${gameIndex}&page=${currentPage}&from=index" aria-label="View details for ${game.title}">
                        <img src="${src}" 
                             class="game-image" 
                             alt="${game.title} game cover" 
                             onerror="this.src='https://via.placeholder.com/250x200?text=Game+Cover';" 
                             loading="lazy"
                             srcset="${srcset}"
                             sizes="(max-width: 600px) 250px, 500px"
                             width="250"
                             height="200">
                        <div class="game-info">
                            <h3 class="game-title">${game.title}</h3>
                            <div class="game-meta">
                                <span>${game.developer}</span>
                                <span>${game.version}</span>
                            </div>
                            <p class="game-description">${game.description.substring(0, 80)}...</p>
                        </div>
                    </a>
                `;
                gameRow.appendChild(gameCard);
                fragment.appendChild(gameRow);
            });
            gamesGrid.innerHTML = '';
            gamesGrid.appendChild(fragment);

            renderPagination(gameList);
        }

        function renderPagination(gameList) {
            const pagination = document.getElementById("pagination");
            const totalPages = Math.ceil(gameList.length / gamesPerPage);
            pagination.innerHTML = `
                <button id="prev-page" ${currentPage === 1 ? "disabled" : ""} aria-label="Previous page">Prev</button>
                <span aria-current="page">Page ${currentPage} of ${totalPages}</span>
                <button id="next-page" ${currentPage === totalPages ? "disabled" : ""} aria-label="Next page">Next</button>
            `;

            document.getElementById("prev-page")?.addEventListener("click", debounce(async () => {
                if (currentPage > 1) {
                    currentPage--;
                    window.history.replaceState({}, '', `${window.location.pathname}?page=${currentPage}`);
                    await renderGames(allGames, currentPage);
                }
            }, 300));

            document.getElementById("next-page")?.addEventListener("click", debounce(async () => {
                if (currentPage < totalPages) {
                    currentPage++;
                    window.history.replaceState({}, '', `${window.location.pathname}?page=${currentPage}`);
                    await renderGames(allGames, currentPage);
                }
            }, 300));
        }

        // Search handler function
        function handleSearch() {
            const query = document.getElementById("search-input").value.trim();
            if (query) {
                window.location.href = `search.html?query=${encodeURIComponent(query)}`;
            }
        }

        // Debounced search handler
        const debouncedHandleSearch = debounce(handleSearch, 300);

        // Search button handler
        document.getElementById("search-button").addEventListener("click", debouncedHandleSearch);

        // Search on Enter key
        document.getElementById("search-input").addEventListener("keydown", (e) => {
            if (e.key === "Enter") {
                debouncedHandleSearch();
            }
        });

        // Execute fetchGames after DOM is loaded
        document.addEventListener("DOMContentLoaded", fetchGames);
    </script>
</body>

</html>